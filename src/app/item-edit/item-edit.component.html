<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit</title>
</head>
<body>

</body>
</html>
<br>
<h3>Edit Item</h3>
<div class="card">
  <div class="card-body">
    <form [formGroup]="itemForm" novalidate>

      <div class="form-group">
        <label class="mr-sm-2" for="typeId">Type</label>
        <select class="custom-select mr-sm-2" id="typeId" formControlName="typeId" required [(ngModel)]="item.typeId" #id [(ngModel)] = "item.typeId" name="typeId">
          <option *ngFor="let type of types | async" value="{{type.id}}">{{type.name}}</option>
        </select>
      </div>

      <div class="form-group">
        <label class="col-md-4">Name</label>
        <input type="text" class="form-control" formControlName="name"  #name [(ngModel)] = "item.name" name="name">
      </div>
      <div *ngIf="itemForm.controls['name'].invalid && (itemForm.controls['name'].dirty || itemForm.controls['name'].touched)" class="alert alert-danger">
        <div *ngIf="itemForm.controls['name'].errors.required">
          Name is required.
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-4">Size</label>
        <input type="text" class="form-control" formControlName="size"  #size [(ngModel)] = "item.name" name="name">
      </div>
      <div *ngIf="itemForm.controls['size'].invalid && (itemForm.controls['size'].dirty || itemForm.controls['name'].touched)" class="alert alert-danger">
        <div *ngIf="itemForm.controls['size'].errors.required">
          Size is required.
        </div>
        <div *ngIf="itemForm.controls['name'].errors.pattern">
          Size must be a number.
        </div>
      </div>


      <div class="form-group">
        <label class="col-md-4">Cost</label>
        <input type="text" class="form-control" formControlName="cost" #cost [(ngModel)] = "item.cost" name="cost">
      </div>
      <div *ngIf="itemForm.controls['cost'].invalid && (itemForm.controls['cost'].dirty || itemForm.controls['cost'].touched)" class="alert alert-danger">
        <div *ngIf="itemForm.controls['cost'].errors.required">
          Cost is required.
        </div>
        <div *ngIf="itemForm.controls['cost'].errors.pattern">
          Cost must be a number.
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-4">Description</label>
        <input type="text" class="form-control" formControlName="description" #description [(ngModel)] = "item.description" name="description">
      </div>
      <div *ngIf="itemForm.controls['description'].invalid && (itemForm.controls['description'].dirty || itemForm.controls['description'].touched)" class="alert alert-danger">
        <div *ngIf="itemForm.controls['description'].errors.required">
          Description is required.
        </div>
        <div *ngIf="itemForm.controls['description'].errors.maxlength">
          Description must contain only letters.
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-4">Dislocation</label>
        <input type="text" class="form-control" formControlName="dislocation" #dislocation [(ngModel)] = "item.dislocation" name="dislocation">
      </div>
      <div *ngIf="itemForm.controls['dislocation'].invalid && (itemForm.controls['dislocation'].dirty || itemForm.controls['dislocation'].touched)" class="alert alert-danger">
        <div *ngIf="itemForm.controls['dislocation'].errors.required">
          Dislocation is required.
        </div>
        <div *ngIf="itemForm.controls['dislocation'].errors.maxlength">
          Dislocation must contain only letters.
        </div>
      </div>

      <div class="form-group">
        <label for="image">Image: </label>
        <br>
        <input type="file" id="image" (change)="handleImageInput($event.target.files)">
      </div>

      <div class="form-group">
        <button type="button" (click)="updateItem()" [disabled]="(itemForm.invalid || !rightTypeFile)"  class="btn btn-primary">Update</button>
      </div>
    </form>
  </div>
</div>
